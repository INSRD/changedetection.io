# Use the official pre-built image instead of building from source
FROM ghcr.io/dgtlmoon/changedetection.io:latest

# Railway-specific environment variables
ENV PORT=5000
ENV PYTHONUNBUFFERED=1

# Create datastore directory
RUN mkdir -p /datastore

# Expose the port
EXPOSE 5000

# Use the default command from the base image
CMD ["python", "./changedetection.py", "-d", "/datastore"]